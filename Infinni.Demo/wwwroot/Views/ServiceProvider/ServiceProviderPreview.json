{
  "$schema": "https://raw.githubusercontent.com/InfinniPlatform/InfinniUI-schema/master/View/View.json",
  "Name": "ServiceProviderPreview",
  "Text": "Просмотр поставщика",
  "DataSources": [
    {
      "DocumentDataSource": {
        "Name": "ServiceProviderDataSource",
        "DocumentId": "ServiceProvider",
        "Filter": "eq(_id,'<%Id%>')",
        "FilterParams": {
          "Id": {
            "Source": "DocumentId"
          }
        }
      }
    }
  ],
  "Parameters": [
    {
      "Name": "DocumentId"
    }
  ],
  "Items": [
    {
      "StackPanel": {
        "Orientation": "Horizontal",
        "ViewMode": "FormGroup",
        "Items": [
          {
            "Button": {
              "Name": "ServiceprovidersButton",
              "Text": "Поставщики",
              "ViewMode": "link",
              "Action": {
                "RouteToAction": {
                  "Name": "ServiceProvidersRoute"
                }
              }
            }
          },
          {
            "Icon": {
              "Name": "RightArrowIcon",
              "Value": "angle-right"
            }
          },
          {
            "Button": {
              "Name": "ServiceProviderNameButton",
              "ViewMode": "link",
              "Text": {
                "Source": "ServiceProviderDataSource",
                "Property": "$.Name"
              }
            }
          }
        ]
      }
    },
    {
      "Panel": {
        "Name": "MainPanel",
        "HeaderTemplate": {
          "GridPanel": {
            "Items": [
              {
                "Cell": {
                  "ColumnSpan": 7,
                  "Items": [
                    {
                      "Label": {
                        "Name": "HeaderLabel",
                        "TextTrimming": false,
                        "TextWrapping": true,
                        "Text": {
                          "Source": "ServiceProviderDataSource",
                          "Property": "$.Name"
                        }
                      }
                    }
                  ]
                }
              },
              {
                "Cell": {
                  "ColumnSpan": 3
                }
              },
              {
                "Cell": {
                  "ColumnSpan": 2,
                  "Items": [
                    {
                      "StackPanel": {
                        "Orientation": "Horizontal",
                        "HorizontalAlignment": "Right",
                        "ViewMode": "FormGroup",
                        "Items": [
                          {
                            "Button": {
                              "Name": "EditButton",
                              "ContentTemplate": {
                                "Icon": {
                                  "Name": "EditButtonPencilIcon",
                                  "Value": "pencil"
                                }
                              },
                              "Action": {
                                "RouteToAction": {
                                  "Name": "ServiceProviderEditRoute",
                                  "Params": [
                                    {
                                      "Name": "Id",
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$._id"
                                      }
                                    }
                                  ]
                                }
                              }
                            }
                          },
                          {
                            "Button": {
                              "Name": "RemoveButton",
                              "ContentTemplate": {
                                "Icon": {
                                  "Name": "RemoveButtonRemoveIcon",
                                  "Value": "remove"
                                }
                              },
                              "OnClick": "SS:DeleteButtonOnClick"
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "Items": [
          {
            "ScrollPanel": {
              "Items": [
                {
                  "GridPanel": {
                    "Items": [
                      {
                        "Cell": {
                          "ColumnSpan": 2,
                          "Items": [
                            {
                              "ImageBox": {
                                "Name": "ServiceProviderPhotoImageBox",
                                "Style": "schoolStore-provider-photo",
                                "Enabled": false,
                                "AcceptTypes": [
                                  "image/png",
                                  "image/jpeg"
                                ],
                                "MaxSize": 2621440,
                                "Value": {
                                  "Source": "ServiceProviderDataSource",
                                  "Property": "$.Photo"
                                }
                              }
                            }
                          ]
                        }
                      },
                      {
                        "Cell": {
                          "ColumnSpan": 6,
                          "Items": [
                            {
                              "StackPanel": {
                                "ViewMode": "FormGroup",
                                "Items": [
                                  {
                                    "Label": {
                                      "Name": "AboutLabel",
                                      "Text": "О компании"
                                    }
                                  },
                                  {
                                    "Panel": {
                                      "Name": "AboutPanel",
                                      "Items": [
                                        {
                                          "Label": {
                                            "Name": "CityLabel",
                                            "DisplayFormat": "Город: {Name}",
                                            "Value": {
                                              "Source": "ServiceProviderDataSource",
                                              "Property": "$.City.Name"
                                            }
                                          }
                                        },
                                        {
                                          "Label": {
                                            "Name": "AddressLabel",
                                            "TextTrimming": false,
                                            "TextWrapping": true,
                                            "DisplayFormat": "Адрес: {Address}",
                                            "Value": {
                                              "Source": "ServiceProviderDataSource",
                                              "Property": "$.Address"
                                            }
                                          }
                                        },
                                        {
                                          "Label": {
                                            "Name": "DescriptionLabel",
                                            "TextTrimming": false,
                                            "TextWrapping": true,
                                            "DisplayFormat": "Описание: {Description}",
                                            "Value": {
                                              "Source": "ServiceProviderDataSource",
                                              "Property": "$.Description"
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    "StackPanel": {
                                      "ViewMode": "FormGroup",
                                      "Items": [
                                        {
                                          "Label": {
                                            "Name": "ServicesLabel",
                                            "Text": "Услуги"
                                          }
                                        },
                                        {
                                          "StackPanel": {
                                            "Items": {
                                              "Source": "ServiceProviderDataSource",
                                              "Property": "$.Services"
                                            },
                                            "ItemTemplate": {
                                              "GridPanel": {
                                                "Items": [
                                                  {
                                                    "Cell": {
                                                      "Style": "schoolStore-grid-panel-cell-2",
                                                      "ColumnSpan": 2,
                                                      "Items": [
                                                        {
                                                          "Panel": {
                                                            "Name": "ServicesCaptionsPanel",
                                                            "Items": [
                                                              {
                                                                "Label": {
                                                                  "Name": "ServiceCaptionLabel",
                                                                  "Text": {
                                                                    "Source": "ServiceProviderDataSource",
                                                                    "Property": "@.#",
                                                                    "Mode": "ToElement",
                                                                    "Converter": {
                                                                      "ToElement": "{return SchoolStore.common.serviceCaptionLabelTextConverter(context, args);}"
                                                                    }
                                                                  },
                                                                  "Tag": "ServiceProviderPreview"
                                                                }
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  },
                                                  {
                                                    "Cell": {
                                                      "Style": "schoolStore-grid-panel-cell-10",
                                                      "ColumnSpan": 10,
                                                      "Items": [
                                                        {
                                                          "Panel": {
                                                            "Name": "ServicesPanel",
                                                            "Items": [
                                                              {
                                                                "StackPanel": {
                                                                  "Orientation": "Horizontal",
                                                                  "ViewMode": "FormGroup",
                                                                  "Items": [
                                                                    {
                                                                      "StackPanel": {
                                                                        "Items": [
                                                                          {
                                                                            "Label": {
                                                                              "Name": "ServiceNameLabel",
                                                                              "EscapeHtml": false,
                                                                              "TextTrimming": false,
                                                                              "TextWrapping": true,
                                                                              "DisplayFormat": "<b>{Name}</b>",
                                                                              "Value": {
                                                                                "Source": "ServiceProviderDataSource",
                                                                                "Property": "@.#"
                                                                              }
                                                                            }
                                                                          },
                                                                          {
                                                                            "Label": {
                                                                              "Name": "ServiceDescriptionLabel",
                                                                              "TextTrimming": false,
                                                                              "TextWrapping": true,
                                                                              "Text": {
                                                                                "Source": "ServiceProviderDataSource",
                                                                                "Property": "@.#.Description"
                                                                              }
                                                                            }
                                                                          }
                                                                        ]
                                                                      }
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      {
                        "Cell": {
                          "ColumnSpan": 4,
                          "Items": [
                            {
                              "Label": {
                                "Name": "ContactsLabel",
                                "Text": "Контактная информация"
                              }
                            },
                            {
                              "Panel": {
                                "Name": "ContactsPanel",
                                "Items": [
                                  {
                                    "Label": {
                                      "Name": "SiteLabel",
                                      "EscapeHtml": false,
                                      "TextTrimming": false,
                                      "TextWrapping": true,
                                      "DisplayFormat": "Сайт: <a href=\"{Site}\">{Site}</a>",
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$"
                                      }
                                    }
                                  },
                                  {
                                    "Label": {
                                      "Name": "EmailLabel",
                                      "DisplayFormat": "E-mail: {Email}",
                                      "TextTrimming": false,
                                      "TextWrapping": true,
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$"
                                      }
                                    }
                                  },
                                  {
                                    "Label": {
                                      "Name": "PhoneLabel",
                                      "DisplayFormat": "Телефон: {Phone}",
                                      "TextTrimming": false,
                                      "TextWrapping": true,
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$"
                                      }
                                    }
                                  },
                                  {
                                    "Label": {
                                      "Name": "VKLabel",
                                      "EscapeHtml": false,
                                      "TextTrimming": false,
                                      "TextWrapping": true,
                                      "DisplayFormat": "ВКонтакте: <a href=\"{VK}\">{VK}</a>",
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$"
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "Label": {
                                "Name": "CategoriesLabel",
                                "Text": "Категория"
                              }
                            },
                            {
                              "Panel": {
                                "Name": "CategoryNamePanel",
                                "Items": [
                                  {
                                    "Label": {
                                      "Name": "CategoryNameLabel",
                                      "DisplayFormat": "{Name}",
                                      "TextTrimming": false,
                                      "TextWrapping": true,
                                      "Value": {
                                        "Source": "ServiceProviderDataSource",
                                        "Property": "$.Category.Name"
                                      }
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "Label": {
                                "Name": "SubCategoryLabel",
                                "Text": "Подкатегории",
                                "TextTrimming": false,
                                "TextWrapping": true,
                                "Visible": {
                                  "Source": "ServiceProviderDataSource",
                                  "Property": "$.SubCategories",
                                  "Converter": {
                                    "ToElement": "{return args.value && args.value.length > 0;}"
                                  }
                                }
                              }
                            },
                            {
                              "StackPanel": {
                                "Items": {
                                  "Source": "ServiceProviderDataSource",
                                  "Property": "$.SubCategories"
                                },
                                "ItemTemplate": {
                                  "StackPanel": {
                                    "Items": [
                                      {
                                        "Panel": {
                                          "Name": "SubCategoriesPanel",
                                          "Items": [
                                            {
                                              "StackPanel": {
                                                "Orientation": "Horizontal",
                                                "ViewMode": "FormGroup",
                                                "Items": [
                                                  {
                                                    "StackPanel": {
                                                      "Items": [
                                                        {
                                                          "Label": {
                                                            "Name": "SubCategoryNameLabel",
                                                            "DisplayFormat": "{Name}",
                                                            "TextTrimming": false,
                                                            "TextWrapping": true,
                                                            "Value": {
                                                              "Source": "ServiceProviderDataSource",
                                                              "Property": "@.#.Category.Name"
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}
